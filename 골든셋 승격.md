Golden Set 승격(Final) 필수값 입력 가이드 (MVP v1.0)

목표: Admin이 수동 Seed 20개를 기반으로 승격 조건을 충족하도록 필드들을 채우고, 이후 Enrichment(Job)가 돌아도 수정값이 덮어써지지 않게 운영한다.

1) “승격 Gate 4개” 쉬운 설명 (왜 필요한가)
Gate 1) Target Resolved (resolved_target_symbol)

의미: 화면의 Target(예: HER2)은 사람 친화적 라벨이고, 실제 DB/임상 검색은 유전자 심볼(예: ERBB2) 로 등록된 경우가 많습니다.

그래서 resolved_target_symbol(예: HER2 → ERBB2)이 있어야 “놓치지 않고” 검색/동기화가 가능합니다.

결론: 승격 전 필수로 하나는 채웁니다.

Gate 2) Primary NCT (clinical_nct_id_primary)

의미: 어떤 약은 임상이 10~50개씩 있습니다. 그 중 “대표 임상 1개”를 정해두면,

임상 상태(Active/Terminated/Completed) 동기화

중단 사유(WhyStopped) 추적

Phase의 최신값 반영
이 쉬워집니다.

결론: “임상 추적까지 MVP에 넣을 거면 필수”, 아니라면 “선택”으로 바꿀 수 있습니다(아래 4번 참고).

Gate 3) SMILES Ready (payload_smiles_standardized OR proxy_smiles_flag)

의미: RDKit 계산/시뮬레이션을 하려면 결국 구조가 필요합니다.

payload_smiles_standardized가 있으면 진짜 구조 기반 계산

없으면 proxy_smiles_flag=true로 대체(Proxy) 구조 기반 계산을 허용

결론: 둘 중 하나는 반드시 채워야 계산/리포트가 가능합니다.

Gate 4) Evidence > 1 (evidence_refs ≥ 1 or 2)

의미: “왜 그렇게 판단했는지”를 보고서/검증(Traceability)로 남기는 최소 장치입니다.

evidence_refs(PMID, NCT, FDA Label/BLA, Review Table 등) 1개 이상이면 “근거 있음”으로 처리합니다.

결론: 승격 전 최소 1개 이상 첨부를 권장(팀 운영상 2개 이상을 권장).

2) 승격을 위해 Admin이 채워야 하는 “필수 필드” 체크리스트

아래 4개 Gate를 충족하면 “승격 가능” 상태가 됩니다.

(A) Target Resolved 필드

resolved_target_symbol: 예) ERBB2, FOLR1, MET, TACSTD2(TROP2) 등

권장 룰:

단일 타겟이면 문자열 1개

복수 타겟(이중항체/다중표적)이면 ERBB2;EGFR 같이 구분자 사용(또는 배열/JSONB)

(B) Primary NCT 필드 (정책에 따라 필수/선택)

clinical_nct_id_primary: 예) NCT04656652

주의:

“대표 임상”은 단순 매칭이 아니라 최고 Phase + 의미 있는 Status 기준으로 고르는 것을 권장

(승격이 아닌 Enrichment 단계에서 자동 후보 추천 → Admin이 확정하는 방식이 가장 안전)

(C) SMILES Ready 필드

둘 중 하나만 충족하면 됩니다.

실제 SMILES

payload_smiles_standardized: PubChem에서 가져오거나(가능), Admin이 직접 입력

함께 있으면 좋은 보조필드(선택):

payload_inchikey

payload_pubchem_cid

payload_smiles_source = PUBCHEM | MANUAL | PATENT_PROXY

Proxy 플래그

proxy_smiles_flag = true

proxy_reference: 예) SN-38 core, Belotecan core, Exatecan core

(권장 추가) is_proxy_derived = true 같은 명시 플래그를 features 테이블에도 남김

이유: RDKit 수치가 “진짜 약물 구조가 아니라 Proxy 기반”임을 보고서에서 분리 표기해야 함

(D) Evidence 필드

evidence_refs: 최소 1개 이상
예시:

FDA Label/BLA: BLA 761139

NCT: NCT04656652

PMID: PMID: 38245678

Review Table: NRDD_2025_Table2_Row7 (문서/캡처 기반 내부 참조도 가능)

3) “SMILES Ready”는 PubChem에서 자동으로 가져올 수 있나?

결론부터 말하면 가능합니다. 다만 ‘100% 자동’은 어렵고 70~90%는 현실적입니다.

권장 자동화 전략 (MVP 안정형)

payload_exact_name → PubChem 검색

예: SN-38, MMAE, DM1, Eribulin, Calicheamicin

PubChem에서 아래 순서로 선택:

정확 일치 이름(Preferred) → 동의어(Alternate) → 유사 후보(Proxy 후보)

가져온 SMILES는 바로 쓰지 말고 전처리:

Salt 제거(Salt Remover)

표준화(Standardize)

성공 시:

payload_smiles_standardized 업데이트

proxy_smiles_flag=false

실패 시:

Admin UI에 “실패/후보 리스트” 노출

Admin이 선택하거나 Proxy로 확정

즉, 20개에 대해 전부 수동으로 채우는 것도 가능하지만, 운영 효율을 위해 “PubChem 자동 → 실패분만 수동 보정”이 가장 좋습니다.

4) NCT(Primary NCT)는 불필요한가? (정책 옵션 3가지)
옵션 A) NCT를 “필수” 유지 (Clinical 동기화가 MVP 범위일 때)

장점: 임상 상태/중단사유 추적이 즉시 가능

단점: Admin이 NCT를 찾는 부담이 큼

권장 대상: Approved/Phase2+가 핵심인 경우

옵션 B) NCT를 “조건부 필수” (권장: 현실적인 타협)

규칙:

clinical_phase in (APPROVED, P2, P3) 인 경우에만 clinical_nct_id_primary 필수

P1 또는 “Novelty”는 선택

장점: 필수 입력 부담을 줄이면서도 핵심 약물은 추적 가능

옵션 C) NCT를 “승격 필수에서 제외” (순수 화학/설계 중심 MVP)

Gate에서 Primary NCT 제거, 대신 아래 앵커 중 하나만 필수:

primary_source_type + primary_source_id (FDA/BLA/PMID/Review Table)

장점: 승격이 빨라짐, Seed 품질 구축에 집중 가능

단점: 임상 동기화/상태 업데이트는 Phase 2로 미뤄짐

5) Admin이 실제로 “승격”하려면 지금 화면에서 뭘 해야 하나?

현재 UI의 Gate Checklist(0/4)는 “자동 계산”이 아니라 입력값이 채워졌는지를 체크합니다.
따라서 승격하려면 아래를 채우는 구조가 맞습니다.

최소 승격 루틴 (NCT 옵션 C 기준: 가장 빠름)

resolved_target_symbol 입력

payload_smiles_standardized 입력 또는 proxy_smiles_flag=true + proxy_reference 입력

evidence_refs 1개 이상 추가

Verified Lock(또는 is_manually_verified)을 true로 전환
→ 승격 버튼 활성화

임상 추적까지 포함한 승격 루틴 (옵션 A/B 기준)

위 1~3에 더해,

clinical_nct_id_primary 확정
→ 승격 버튼 활성화

6) 운영 안정성 (덮어쓰기 방지) — 필수 권장

승격/검증 데이터가 Job에 의해 덮어써지면 운영이 무너집니다.
따라서 아래 중 하나는 반드시 넣는 것을 권장합니다.

방법 1) 레코드 단위 락

is_manually_verified = true이면

Enrichment Job은 update 금지

변경 필요 시 Review Queue로만 올림

방법 2) 필드 단위 락(더 정교함)

payload_smiles_verified, resolved_target_verified, nct_verified 등

Job은 verified=false인 필드만 업데이트

7) Anti-Gravity 작업 지시 요약 (바로 실행할 To-do)

승격 정책 결정

NCT를 Gate에서: 필수(A) / 조건부(B) / 제외(C) 중 선택

UI/DB 반영

Gate Checklist 조건을 정책에 맞게 수정

is_manually_verified(또는 필드별 verified) 추가

SMILES 확보 방식 결정

PubChem 자동(추천) + 실패분 수동 보정

또는 20개 전량 수동 입력

Evidence 입력 규칙 확정

최소 1개(권장 2개)

포맷: BLA xxxx, NCTxxxx, PMID:xxxx